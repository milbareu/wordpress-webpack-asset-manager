# MB WPAssets - WordPress Webpack Asset Manager

**MB\WPAssets** is a PHP library for managing and enqueuing Webpack-generated assets in a WordPress environment. It
handles asset paths using a manifest generated by Webpack and supports WordPress' dependency extraction feature.

## Features

- Automatically load and enqueue CSS and JavaScript bundles.
- Integrates with Webpack's `manifest.json` to load versioned assets.
- Supports WordPress' dependency extraction via `@wordpress/dependency-extraction-webpack-plugin`.
- Simple and intuitive interface for setting up asset management.

## Installation

Install via Composer:

```bash
composer require milbareu/wordpress-webpack-asset-manager
```

## Usage

### 1. Setting the Manifest Path

Before using the asset manager, you need to set the path to your Webpack-generated `manifest.json` file. This file is
required to resolve the hashed asset filenames.

```php
use MB\WPAssets\AssetManager;

// Set the manifest path (usually in your theme or plugin setup)
AssetManager::setManifestPath(get_template_directory() . '/public/manifest.json');
```

### 2. Enqueueing Asset Bundles

You can enqueue both JavaScript and CSS assets using the `enqueueBundle()` method. This method will:

- Automatically load asset URLs from the manifest.
- Enqueue assets with any dependencies extracted via the `*.asset.php` files generated by Webpack
  and `@wordpress/dependency-extraction-webpack-plugin`.

```php
// Enqueue the 'app' bundle
add_action('wp_enqueue_scripts', function () {
    AssetManager::enqueueBundle('app');
});

// Enqueue the 'editor' bundle for the WordPress block editor
add_action('enqueue_block_editor_assets', function () {
    AssetManager::enqueueBundle('editor');
});
```

#### Namespace Support (Optional)

If you are managing assets in different namespaces, you can pass the namespace as the second argument in
the `enqueueBundle()` method. This can help in cases where different projects or sections of a theme/plugin need unique
asset names.

```php
// Enqueue the 'app' bundle with a namespace
add_action('wp_enqueue_scripts', function () {
    AssetManager::enqueueBundle('app', 'myplugin');
});
```

### 4. Asset URL Helper

You can also use the `asset()` method to get the full URL to a specific asset from the `manifest.json` file.

```php
echo '<link rel="stylesheet" href="' . AssetManager::asset('styles/app.css') . '">';
```

## Webpack Configuration

# License

This project is licensed under the MIT License.
